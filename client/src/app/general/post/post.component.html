<div class="post">
  <!-- * Header -->
  <div class="header">
    <div class="user-image" [ngStyle]="{ 'background-image': 'url(' + userImage  +')' }">
    </div>
    <div class="uploader-info">
      <span>{{ username }}</span>
      <small>{{ timestamp }}</small>
    </div>
    <div class="post-menu" (click)="openPostDialog()">
      <fa-icon [icon]="faEllipsisV"></fa-icon>
    </div>
  </div>

  <!-- * Image -->
  <a [href]="url" target="_blank">
    <div class="image">
      <img [src]="image" [alt]="title">
    </div>
  </a>

  <!-- * Title -->
  <div class="title" [ngStyle]="{'grid-template-columns': isInCollection ? '1fr 45px' : '1fr 106px'}">
    <strong>{{ title }}</strong>
    <div class="collection-badge-false" *ngIf="!isInCollection" matRipple (click)="openCollectionsDialog()">
      <fa-icon [icon]="faPlus"></fa-icon> Add to Collection
    </div>

    <div class="collection-badge-true" *ngIf="isInCollection" matRipple (click)="openCollectionsDialog()">
      &nbsp;&nbsp;&nbsp;&nbsp;Added
    </div>
  </div>

  <!-- * Tags -->
  <div class="tags">
    <div class="tag">
      <a *ngFor="let tag of tags"><strong>#{{ tag }}</strong></a>
    </div>
  </div>

  <!-- * Description -->
  <div class="description">
    <p>
      {{ description | truncate:[truncateValue] }}
    </p>
    <span *ngIf="isSeeMore" (click)="seeMore()" class="see-more">See More</span>
  </div>

  <!-- * Controls -->
  <div class="controls">
    <button mat-button class="btn btn-like" [ngClass]="{ 'is-liked': isLiked }" (click)="isLiked = !isLiked">
      <fa-icon [icon]="faThumbsUp"></fa-icon>
    </button>
    <button mat-button class="btn btn-comment" [ngClass]="{ 'show-comments': showComments }"
      (click)="showComments = !showComments" [disabled]="!allComments.length > 0">
      <fa-icon [icon]="faComment"></fa-icon>
    </button>
  </div>

  <!-- * All Comments -->
  <div class="all-comments" *ngIf="allComments.length > 0 && showComments">
    <div class="comment" *ngFor="let comment of allComments">
      <span class="username"><strong>{{ comment.username }}</strong></span>
      <span class="text">{{ comment.content }}</span>
    </div>
  </div>

  <!-- * Add Comment -->
  <div class="add-comment">
    <form [formGroup]="commentForm" (ngSubmit)="addComment()">
      <div>
        <textarea matInput placeholder="Leave a comment" autosize formControlName="comment"
          (keydown.enter)="textareaEnterPressed($event)"></textarea>
        <button *ngIf="!commentForm.controls['comment'].value">
          <fa-icon [icon]="faReply"></fa-icon>
        </button>
      </div>
    </form>
  </div>
</div>
